/*!
 * jQuery ClassyCountdown
 * www.class.pm
 *
 * Written by Marius Stanciu - Sergiu <marius@class.pm>
 * Licensed under the MIT license www.class.pm/LICENSE-MIT
 * Version 1.0.0
 *
 */
 var timer;
 (function(c) {
	c.fn.ClassyCountdown=function(k,r){

		function m() {
			d--;
			console.log(d);
			// console.log(h+'---');
			// l();
			// h=Math.floor(d%86400%3600%60%60)
			a.find(".ClassyCountdown-seconds input").val(60-6*d).trigger("change"); // 控制读条

			a.find(".ClassyCountdown-seconds .ClassyCountdown-value > div").html(d); // 控制倒计时
			if(d == 0){
				clearInterval(timer);
			}
		}

		function q(a) {
			return{
				labels:!0,
				style:{
					element:"",
					textResponsive:.5,
					seconds: {
						gauge: {
							thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#f39c12"
						},
						textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"
					}
				}
			};
		}

		var a=c(this),e,f,g,h,d,n=!1,b= {
			end: void 0,
			now:c.now(),
			labels:!0,
			style: {
				element: "",
				labels:!1,
				textResponsive:.5,
				seconds: {
					gauge: {
						thickness:.02,bgColor:"rgba(0, 0, 0, 0)", 
						fgColor:"rgba(0, 0, 0, 1)",lineCap:"butt"
					},
					textCSS:""
				}
			},
			onEndCallback:function() {}
		};

		// k.theme&&(b=c.extend(!0,b,q(k.theme)));
		b=c.extend(!0,b,k);
		(function() {
			a.append('<div class="ClassyCountdown-wrapper"><div class="ClassyCountdown-seconds"><input type="text" /><span class="ClassyCountdown-value"><div></div><span></span></span></div></div>'); 
			a.find(".ClassyCountdown-seconds input").knob(c.extend( {width: "100%",displayInput:!1,readOnly:!0,max:60},b.style.seconds.gauge)); 

			// a.find(".ClassyCountdown-seconds .ClassyCountdown-value").attr("style",b.style.seconds.textCSS);
			a.find(".ClassyCountdown-value").each(function() {
				c(this).css("margin-top", Math.floor(0-parseInt(c(this).height())/2)+"px")
			});


			d=b.end-b.now;
			// l()
		})();

		m();
		timer = setInterval(m,1E3);
		(function() {

			b.style.textResponsive&&(
				a.find(".ClassyCountdown-value").css("font-size",Math.floor(a.find("> div").eq(0).width()*b.style.textResponsive/10)+"px"),
				a.find(".ClassyCountdown-value").each(function() {
					c(this).css("margin-top",Math.floor(0-parseInt(c(this).height())/2)+"px")
				})
			);

		})()
	}
})(jQuery);